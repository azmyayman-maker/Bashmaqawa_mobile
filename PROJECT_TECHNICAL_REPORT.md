# تقرير فني شامل - مشروع تطبيق Bashmaqawa Mobile

**تاريخ التقرير:** 2026-02-01
**حالة المشروع:** قيد التطوير / التحسين
**المنصة:** Android (Native Kotlin)

---

## 1. نظرة عامة على المشروع (Project Overview)

تطبيق **Bashmaqawa** هو نظام إدارة موارد (ERP) مخصص للهواتف المحمولة، يستهدف إدارة العمالة، المشاريع، والحسابات المالية لشركات المقاولات أو الأعمال الميدانية. تم بناء التطبيق باستخدام أحدث تقنيات تطوير Android الأصلية (Native) مع التركيز على الأداء، تجربة المستخدم الحديثة، والأمان.

### الأهداف الرئيسية للتطبيق:
*   إدارة بيانات العمال وتصنيفاتهم.
*   متابعة الحضور والانصراف والرواتب.
*   إدارة المشاريع ومراكز التكلفة.
*   الإدارة المالية (حسابات، معاملات، خزنة، بنوك).
*   دعم اتخاذ القرار عبر تقارير تحليلية ومساعد ذكي (AI).

---

## 2. البنية التقنية (Technical Architecture)

يعتمد المشروع على بنية برمجية حديثة وقوية تضمن القابلية للتوسع والصيانة.

*   **لغة البرمجة:** Kotlin (100%).
*   **تصميم الواجهة:** Jetpack Compose (Modern Declarative UI).
*   **نمط التصميم (Architecture Pattern):** MVVM (Model-View-ViewModel) مع مبادئ Clean Architecture.
*   **حقن الاعتماديات (Dependency Injection):** Dagger Hilt.
*   **البرمجة غير المتزامنة:** Kotlin Coroutines & Flow.

### هيكلية المشروع (Project Structure):
يتبع المشروع تقسيمًا منطقيًا حسب الميزات (Feature-based) والطبقات (Layer-based):

1.  **`presentation`**: تحتوي على واجهات المستخدم (Screens) و ViewModels.
2.  **`data`**: تحتوي على قاعدة البيانات، المستودعات (Repositories)، ومصادر البيانات.
3.  **`domain`**: (ضمنياً) تحتوي على منطق العمل (Business Logic) المتمثل في الـ UseCases والـ Repositories Interfaces.

---

## 3. طبقة البيانات (Data Layer)

### قاعدة البيانات المحلية (Local Database)
يستخدم التطبيق مكتبة **Room Database** لإدارة البيانات محلياً، مما يضمن عمل التطبيق دون اتصال بالإنترنت (Offline-first).

*   **اسم قاعدة البيانات:** `bashmaqawa.db`
*   **الإصدار الحالي:** 3
*   **ORM:** Room with KSP (Kotlin Symbol Processing).

#### الجداول الأساسية (Entities):
1.  **`User`**: لتخزين بيانات المستخدمين وصلاحياتهم (مثل المدير Admin).
2.  **`Worker`**: سجلات العمال (الاسم، الوظيفة، الراتب، التفاصيل الشخصية).
3.  **`WorkerCategory`**: تصنيفات العمال (مثال: "عامل ماهر"، "مساعد").
4.  **`Project`**: بيانات المشاريع (الاسم، الموقع، الميزانية، الحالة).
5.  **`Attendance`**: سجلات الحضور والانصراف (الوردية، ساعات العمل، الإضافي).
6.  **`WorkerAdvance`**: السلف المالية المقدمة للعمال.
7.  **`WorkerDeduction`**: الخصومات المطبقة على العمال.
8.  **`Transaction`**: المعاملات المالية (إيرادات، مصروفات).
9.  **`Account`**: الحسابات المالية (خزنة، بنك، محافظ إلكترونية).
10. **`CostCenter`**: مراكز التكلفة لتوزيع المصاريف.
11. **`AIMemory`**: تخزين سياق المحادثات مع المساعد الذكي.

### إدارة البيانات (Repositories)
يتم الوصول للبيانات عبر مستودعات متخصصة، منها:
*   `AuthRepository`: لإدارة عمليات الدخول والمصادقة.
*   `WorkerRepository`: لجميع عمليات العمال.
*   `ProjectRepository`: لإدارة المشاريع.
*   `FinancialRepository`: للمعاملات المالية والحسابات.
*   `AttendanceRepository`: لإدارة الحضور.
*   `BackupRepository`: لإدارة النسخ الاحتياطي للبيانات.

---

## 4. واجهة المستخدم (User Interface - UI)

تم بناء الواجهة بالكامل باستخدام **Jetpack Compose**، مما يوفر واجهة عصرية، تفاعلية، وسلسة.

### شاشات التطبيق الرئيسية (Main Screens):
1.  **Login (`login`)**: شاشة تسجيل الدخول الموحدة، تدعم المصادقة البيومترية (Biometric Auth) وكلمة المرور.
2.  **Home (`home`)**: لوحة القيادة الرئيسية (Dashboard) تعرض ملخصات سريعة.
3.  **Workforce (`workforce`)**:
    *   قائمة العمال.
    *   إدارة السلف والخصومات.
    *   تصنيفات العمال.
4.  **Projects (`projects`)**:
    *   قائمة المشاريع.
    *   تفاصيل المشروع (الميزانية، التقدم).
5.  **Financial (`financial`)**:
    *   إدارة الخزنة والبنوك.
    *   سجل المعاملات.
6.  **Attendance (`calendar`)**: تقويم لإدارة وتسجيل الحضور اليومي.
7.  **Chat (`chat`)**: واجهة دردشة مع مساعد AI ذكي للإجابة على الاستفسارات حول البيانات.
8.  **Analytics (`analytics`)**: رسوم بيانية وتقارير حول أداء الشركة والمشاريع.
9.  **Settings (`settings`)**: إعدادات التطبيق، إدارة النسخ الاحتياطي، المظهر، واللغة.

### التصميم (Theming)
*   يعتمد التطبيق على **Material Design 3**.
*   يدعم الوضع الليلي والنهاري (Dark/Light Capability).
*   يدعم اتجاهات اللغة العربية (RTL Support) بشكل كامل.

---

## 5. المكتبات والتبعيات (Libraries & Dependencies)

يعتمد التطبيق على مجموعة من المكتبات القياسية والقوية:

*   **AndroidX Core & Lifecycle**: لإدارة دورة حياة التطبيق والمكونات الأساسية.
*   **Jetpack Compose BOM**: لإدارة إصدارات مكونات الواجهة.
*   **Navigation Compose**: للتنقل بين الشاشات.
*   **Hilt**: لحقن الاعتماديات (Dependency Injection).
*   **Room KTX**: للتعامل مع قاعدة البيانات بشكل غير متزامن.
*   **Retrofit & Gson**: للاتصال بالشبكة (AI API).
*   **Coil**: لعرض وتحميل الصور.
*   **DataStore Preferences**: لتخزين الإعدادات البسيطة.
*   **Biometric**: للمصادقة عبر البصمة/الوجه.

---

## 6. الأمان والصلاحيات (Security & Permissions)

### الصلاحيات المطلوبة (Manifest Permissions):
1.  `INTERNET`: للوصول للشبكة (AI Chat).
2.  `ACCESS_NETWORK_STATE`: للتحقق من الاتصال.
3.  `USE_BIOMETRIC`: لدعم الدخول بالبصمة.
4.  `WRITE_EXTERNAL_STORAGE`: (للإصدارات القديمة) لتصدير واستيراد النسخ الاحتياطية والتقارير.

### ميزات الأمان:
*   **تشفير البيانات:** استخدام Room يتيح إمكانية التشفير (إذا تم تفعيل SQLCipher مستقبلاً).
*   **المصادقة:** دعم البصمة يضيف طبقة أمان عالية.
*   **النسخ الاحتياطي:** دعم النسخ الاحتياطي المحلي لاستعادة البيانات في حال الفقدان.

---

## 7. حالة التطوير الحالية (Current Development Status)

### الإعدادات (Build Configuration):
*   **Min SDK**: 26 (Android 8.0) - يغطي معظم الأجهزة الحديثة.
*   **Target SDK**: 34 (Android 14) - متوافق مع أحدث إصدارات أندرويد.
*   **Version**: 1.0.0

### الملاحظات والتحسينات المقترحة:
1.  **اختبارات الوحدة (Testing)**: يحتوي التطبيق على إعدادات JUnit و Espresso، وينصح بزيادة تغطية الاختبارات.
2.  **الأداء (Performance)**: تم تفعيل تتبع المصادر (R8/Proguard) في إصدار Release لتحسين الحجم والأداء.
3.  **التعريب (Localization)**: التطبيق يدعم حالياً اللغة العربية كواجهة أساسية، مع تحضير البنية لدعم لغات أخرى.

---

**الخلاصة:**
تطبيق Bashmaqawa هو تطبيق متكامل، مبني وفق أفضل الممارسات البرمجية الحديثة. يتميز ببنية قوية قابلة للتطوير، وواجهة مستخدم عصرية، ويغطي كافة الاحتياجات الإدارية للمشاريع الصغيرة والمتوسطة بكفاءة عالية.
